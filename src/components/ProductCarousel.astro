---
import database from '../data/database.json';
const featuredProducts = database.products.filter(product => product.featured).slice(0, 3);
---

<section class="py-16 bg-white">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">
      <i class="fas fa-star text-accent-500 mr-2"></i>
      Productos Destacados
    </h2>
    
    <div class="swiper featured-products-swiper relative">
      <div class="swiper-wrapper">
        {featuredProducts.map(product => (
          <div class="swiper-slide">
            <div class="bg-white rounded-lg card-shadow card-shadow-hover overflow-hidden transition-all duration-500 animate-fade-in mx-2 hover:scale-105 hover:-translate-y-2 group">
              <div class="relative">
                <img 
                  src={product.images[0]} 
                  alt={product.title}
                  class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"
                  loading="lazy"
                />
                <div class="absolute top-4 right-4 bg-accent-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-md animate-bounce-slow">
                  <i class="fas fa-star mr-1"></i>
                  Destacado
                </div>
                <div class="absolute top-4 left-4 bg-primary-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-md animate-pulse-slow">
                  {product.category}
                </div>
              </div>
              
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-3 group-hover:text-primary-600 transition-colors duration-300">{product.title}</h3>
                <p class="text-gray-600 mb-4 line-clamp-3">{product.description}</p>
                
                <div class="flex justify-between items-center mb-4">
                  <span class="text-2xl font-bold text-primary-600 animate-glow">${product.price}</span>
                  <div class="flex gap-2">
                    {product.images.length > 1 && (
                      <span class="text-sm text-gray-500 flex items-center">
                        <i class="fas fa-images mr-1"></i>
                        {product.images.length} fotos
                      </span>
                    )}
                  </div>
                </div>
                
                <div class="flex gap-2">
                  <a 
                    href={`/producto/${product.id}`}
                    class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg transition-all duration-300 flex-1 text-center inline-flex items-center justify-center font-semibold hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 group/btn"
                  >
                    <i class="fas fa-eye mr-2 group-hover/btn:animate-wiggle"></i>
                    Ver Detalles
                  </a>
                  <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-lg transition-all duration-300 hover:shadow-md transform hover:-translate-y-1 hover:scale-105 group/heart">
                    <i class="fas fa-heart group-hover/heart:animate-bounce-slow group-hover/heart:text-red-500"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      {featuredProducts.length > 1 && (
        <>
          <div class="swiper-pagination mt-8 relative z-10"></div>
          <div class="swiper-button-next after:text-2xl after:font-black text-primary-500 hover:text-primary-600"></div>
          <div class="swiper-button-prev after:text-2xl after:font-black text-primary-500 hover:text-primary-600"></div>
        </>
      )}
    </div>
    
    <div class="text-center mt-12">
      <a 
        href="/productos" 
        class="bg-accent-500 hover:bg-accent-600 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300 inline-flex items-center hover:shadow-lg transform hover:-translate-y-0.5"
      >
        <i class="fas fa-shopping-bag mr-2"></i>
        Ver Todos los Productos
      </a>
    </div>
  </div>
</section>

<style>
  .featured-products-swiper {
    padding: 0 40px;
  }
  
  .featured-products-swiper .swiper-slide {
    height: auto;
    display: flex;
    align-items: stretch;
  }
  
  .featured-products-swiper .swiper-slide > div {
    width: 100%;
    display: flex;
    flex-direction: column;
  }
  
  .featured-products-swiper .swiper-slide .p-6 {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  
  .featured-products-swiper .swiper-slide .p-6 > div:last-child {
    margin-top: auto;
  }
  
  .swiper-pagination-bullet-active {
    background-color: #3B82F6 !important;
    transform: scale(1.2);
    transition: all 0.3s ease;
  }
  
  .swiper-pagination-bullet {
    background-color: #d1d5db !important;
    opacity: 1 !important;
    transition: all 0.3s ease;
  }
  
  .swiper-pagination-bullet:hover {
    background-color: #9ca3af !important;
    transform: scale(1.1);
  }
  
  .swiper-button-next, .swiper-button-prev {
    color: #3B82F6 !important;
    background: white;
    border-radius: 50%;
    width: 44px !important;
    height: 44px !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
  }
  
  .swiper-button-next:hover, .swiper-button-prev:hover {
    color: #2563eb !important;
    transform: scale(1.1);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }
  
  .swiper-button-next:after, .swiper-button-prev:after {
    font-size: 18px !important;
    font-weight: 900 !important;
  }
  
  @media (max-width: 768px) {
    .featured-products-swiper {
      padding: 0 20px;
    }
    
    .swiper-button-next, .swiper-button-prev {
      width: 36px !important;
      height: 36px !important;
    }
    
    .swiper-button-next:after, .swiper-button-prev:after {
      font-size: 14px !important;
    }
  }
  
  @media (max-width: 640px) {
    .featured-products-swiper {
      padding: 0 10px;
    }
    
    .swiper-button-next, .swiper-button-prev {
      display: none;
    }
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>