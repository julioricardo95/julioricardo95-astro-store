---
import SEO from '../components/SEO.astro';

export interface Props {
  title: string;
  description: string;
  image?: string;
}

const { title, description, image } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <SEO title={title} description={description} image={image} />
  <body class="min-h-screen bg-gray-50">
    <slot />
    
    <!-- Floating Animated Element -->
    <div class="fixed bottom-6 right-6 z-50 animate-float">
      <div class="relative">
        <div class="bg-gradient-to-r from-primary-500 to-secondary-500 text-white p-4 rounded-full shadow-2xl animate-glow cursor-pointer hover:scale-110 transition-transform duration-300 group">
          <div class="animate-spin-slow">
            <i class="fas fa-shopping-cart text-2xl"></i>
          </div>
          <div class="absolute -top-2 -right-2 bg-accent-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center animate-bounce-slow">
            <i class="fas fa-star text-xs"></i>
          </div>
        </div>
        
        <!-- Tooltip -->
        <div class="absolute bottom-full right-0 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
          <div class="bg-gray-800 text-white text-sm px-3 py-2 rounded-lg whitespace-nowrap">
            Â¡Explora nuestros productos!
            <div class="absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" is:inline></script>
    
    <!-- Initialize Swiper -->
    <script is:inline>
      document.addEventListener('DOMContentLoaded', function() {
        // Wait for Swiper to be available
        function initializeSwiper() {
          if (typeof Swiper === 'undefined') {
            setTimeout(initializeSwiper, 100);
            return;
          }
          
          // Featured Products Carousel
          if (document.querySelector('.featured-products-swiper')) {
            const featuredSwiper = new Swiper('.featured-products-swiper', {
              slidesPerView: 1,
              spaceBetween: 30,
              loop: true,
              autoplay: {
                delay: 3000,
                disableOnInteraction: false,
              },
              pagination: {
                el: '.swiper-pagination',
                clickable: true,
              },
              navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
              },
              breakpoints: {
                640: {
                  slidesPerView: 2,
                },
                1024: {
                  slidesPerView: 3,
                },
              },
            });
          }
          
          // Product Images Carousel (for product detail pages)
          if (document.querySelector('.product-images-swiper')) {
            const productImagesSwiper = new Swiper('.product-images-swiper', {
              slidesPerView: 1,
              spaceBetween: 10,
              loop: true,
              pagination: {
                el: '.swiper-pagination',
                clickable: true,
              },
              navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
              },
              thumbs: {
                swiper: '.product-thumbs-swiper'
              }
            });
          }
          
          // Product Thumbnails Carousel
          if (document.querySelector('.product-thumbs-swiper')) {
            const productThumbsSwiper = new Swiper('.product-thumbs-swiper', {
              slidesPerView: 4,
              spaceBetween: 10,
              freeMode: true,
              watchSlidesProgress: true,
              breakpoints: {
                640: {
                  slidesPerView: 5,
                },
                1024: {
                  slidesPerView: 6,
                },
              },
            });
          }
        }
        
        initializeSwiper();
      });
      
      // Floating element click handler
      document.addEventListener('DOMContentLoaded', function() {
        const floatingElement = document.querySelector('.fixed.bottom-6.right-6');
        if (floatingElement) {
          floatingElement.addEventListener('click', function() {
            // Scroll to products section or navigate to products page
            const productsSection = document.getElementById('productos');
            if (productsSection) {
              productsSection.scrollIntoView({ behavior: 'smooth' });
            } else {
              window.location.href = '/productos';
            }
          });
        }
      });
    </script>
  </body>
</html>

<style is:global>
  html, body {
    margin: 0;
    padding: 0;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    line-height: 1.6;
    color: #1f2937;
  }
  
  * {
    box-sizing: border-box;
  }
  
  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.25;
    margin: 0;
  }
  
  p {
    margin: 0 0 1rem 0;
  }
  
  /* Links */
  a {
    color: inherit;
    text-decoration: none;
  }
  
  a:hover {
    text-decoration: none;
  }
  
  /* Buttons */
  button {
    cursor: pointer;
    border: none;
    outline: none;
    font-family: inherit;
  }
  
  button:focus {
    outline: 2px solid #3B82F6;
    outline-offset: 2px;
  }
  
  /* Form elements */
  input, select, textarea {
    font-family: inherit;
    font-size: inherit;
  }
  
  input:focus, select:focus, textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px #3B82F6;
  }
  
  /* Images */
  img {
    max-width: 100%;
    height: auto;
    display: block;
  }
  
  .swiper {
    width: 100%;
    height: 100%;
  }
  
  .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .swiper-pagination-bullet {
    background: #3B82F6;
    opacity: 0.5;
    width: 12px;
    height: 12px;
  }
  
  .swiper-pagination-bullet-active {
    opacity: 1;
    background: #2563eb;
  }
  
  .swiper-button-next,
  .swiper-button-prev {
    color: #3B82F6;
    font-weight: bold;
  }
  
  .swiper-button-next:after,
  .swiper-button-prev:after {
    font-size: 20px;
    font-weight: 900;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #3B82F6;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #2563eb;
  }
  
  /* Utility classes */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Animation classes */
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  /* Hover effects */
  .hover-scale {
    transition: transform 0.3s ease;
  }
  
  .hover-scale:hover {
    transform: scale(1.05);
  }
  
  /* Card shadows */
  .card-shadow {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .card-shadow-hover {
    transition: box-shadow 0.3s ease;
  }
  
  .card-shadow-hover:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  /* Focus styles */
  .focus-ring:focus {
    outline: 2px solid #3B82F6;
    outline-offset: 2px;
  }
  
  /* Loading states */
  .loading {
    opacity: 0.6;
    pointer-events: none;
  }
  
  /* Responsive text */
  @media (max-width: 640px) {
    h1 {
      font-size: 1.875rem;
      line-height: 2.25rem;
    }
    
    h2 {
      font-size: 1.5rem;
      line-height: 2rem;
    }
    
    h3 {
      font-size: 1.25rem;
      line-height: 1.75rem;
    }
  }
  
  /* Print styles */
  @media print {
    .no-print {
      display: none !important;
    }
    
    body {
      background: white !important;
      color: black !important;
    }
  }
</style>